<!DOCTYPE html>
<html lang="zh-TW">
<body>
  <h2 id="msg">計算中...</h2>

  <script>
    // 取得 URL 傳入參數
    const urlParams = new URLSearchParams(window.location.search);
    const dateStr = urlParams.get('date'); // yyyy-mm-dd
    const timeStr = urlParams.get('time'); // HH:MM:SS

    // 建立目標時間
    const target = new Date(`${dateStr}T${timeStr}`);

    function updateCountdown() {
      const now = new Date();
      let diff = Math.floor((target - now) / 1000); // 秒數差

      if (diff < 0) diff = 0;

      const h = Math.floor(diff / 3600);
      const m = Math.floor((diff % 3600) / 60);
      const s = diff % 60;

      document.getElementById("msg").textContent =
        `預計於 ${dateStr} ${timeStr} 開啟頁面\n剩餘：${h} 時 ${m} 分 ${s} 秒`;

      if (diff <= 0) {
        // ★ 這裡填你的最終目標網址 ★
        //const finalUrl = `https://example.com?date=${dateStr}&time=${timeStr}`;
        //const finalUrl = `https://resortbooking.metro.taipei/MT02.aspx?Module=member&files=orderx_mt`;
        const finalUrl = `https://resortbooking.metro.taipei/MT02.aspx?module=net_booking&files=booking_place&PT=1`;
        
        window.location.href = finalUrl;
      }
    }

    // 每秒更新倒數
    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
